<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<title>The Family Pack - Database: Dates</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel='stylesheet' type='text/css' href='../../tfp.css' />
<style type="text/css">
 table.flags {
  display: inline-table;
  float: right;
  margin-left: 1em;
 }

</style>
</head>
<body>

<h1><a  href="../../index.htm"><img id="logo" src="../../tfp5.gif" alt="Logo" /></a>The Family Pack<br/>Database: Dates</h1>

<div id="page" class="database">

<div id="crumbs">
  <a href="../../index.htm" class="m-item">Home</a>
  <a href="../database.htm" class="m-item level1">Database</a>
  <a href="conclusions.htm" class="m-item level2">Conclusions</a>
  <a href="dates.htm" class="m-item level3 thispage">Dates</a>
  <a href="conclusions.htm" class="m-item prev">&lt;&lt;</a>
  <a href="places.htm" class="m-item next">&gt;&gt;</a>
</div>

<div id="content" class="nomenu">

<blockquote>
<p>
 We do NOT know the past in chronological sequence. It may be convenient to lay it out anaesthetized on the table with dates pasted on here and there, but what we know we know by ripples and spirals eddying out from us and from our own time.
</p>
<p class="attribute">Ezra Pound</p>
</blockquote>

<img class='fig' src='tfp-date.png' alt='Date Subsystem' />
<h2>Dates</h2>
<p>
 The Date entity is used to record a single day in history, a day being the shortest period of time that the database can record. The simplest way for a computer to keep track of time is to count the number of days from a fixed point in history, the starting point for the database is Monday 1st January 4713 B.C.E. (Julian). This is day zero for the julian day, the astrological day numbering system. So good news for those of you who can trace their family back the the Ancient Egyptians.
</p>
<p>
 The date entity copes with uncertainty by recording both a date <span class="field">[jdn]</span> and a range <span class="field">[range]</span> of days which my be zero. It is probably easier to consider the entity as a start date <span class="field">[jdn]</span> and end date <span class="field">[jdn+range]</span>. The set of flags <span class="field">[type]</span>, "<b>B</b>efore", "<b>O</b>n" and "<b>A</b>fter" are used to indicate how the start and end dates are to be interpreted.
</p>
<table class="basic flags">
 <tr><th>B</th><th>O</th><th>A</th><th>Style</th></tr>
 <tr><td>0</td><td>0</td><td>0</td><td>Invalid date</td></tr>
 <tr><td>0</td><td>0</td><td>1</td><td>After 19 Sep 1948</td></tr>
 <tr><td>0</td><td>1</td><td>0</td><td>On 19 Sep 1948</td></tr>
 <tr><td>0</td><td>1</td><td>1</td><td>On 19 Sep 1948 or after</td></tr>
 <tr><td>1</td><td>0</td><td>0</td><td>Before 19 Sep 1948</td></tr>
 <tr><td>1</td><td>0</td><td>1</td><td>Not 19 Sep 1948</td></tr>
 <tr><td>1</td><td>1</td><td>0</td><td>On 19 Sep 1948 or before</td></tr>
 <tr><td>1</td><td>1</td><td>1</td><td>About 19 Sep 1948</td></tr>
</table>
<p>
 Consider the time line is divided into three sections by the start and finish dates. The type flags are used to indicate how these periods are interpreted. These flags can be used in combination - but where the central period is not zero and the On flag is set this may lead to some ambiguity. So the assumption is made that in these cases that the central period is more likely than the other (Before or After) periods.
</p>
<p>
 The database will keep a record of the calendar scheme that the date was originally recorded in <span class="field">[record_sch]</span> (where known) as well as the preferred scheme normally used to display the date <span class="field">[display_sch]</span>. The concept of a calendar scheme covers the Julian and Gregory calendars as well as the short lived French Revolutionary Calender and other world styles. It will also extend the concept to country schemes, which will cover the change over from the Julian to Gregory calendar. So the English Calendar scheme which follows the Julian Calendar up until 2nd September 1752, when the change over to the Gregorian Calendar occurs. It will also take into account the 25th March new year in England.
</p>
<p>
 There may be occasions when it is not possible to interpret a particular date, either because the system does not yet cater for that scheme or the scheme cannot be determined. In this case the date is held as a text description <span class="field">[desc]</span>. Such dates cannot be sorted and so will normally appear at the beginning of date sorted lists.
</p>

<h2>Relative Dates</h2>
<p>
 Very often documents contain relative dates, commonly in the form of a persons age. In modern western cultures a persons age is invariably given as the age in years on their last birthday. It follows that if you have a document with a persons age and you know when the document was created, you have the persons date of birth to within a year (or if the documents date is uncertain, then that date's range uncertainty range plus a year). By recording a relative date, it is possible to record the exact nature of the original information. Also, if it is found necessary to change the original base date, all relative dates that rely on it will automatically be updated as well.
</p>
<p>
 A relative date behaves exactly as a fixed date in all respects, including being used as the base date for another relative date.
</p>

<h2>Future Changes</h2>
<p>
 Although the relative dates are working in the current test program, it is probably a bad idea to use jdn column for things other than the actual jdn of date in question. So this will change to create a separate table for RelativeDate, this will have three columns for Years, Months and Days (or whatever other units are indicated) and a field for the base date. The current base_* columns in the Date table will be removed and replaced with a single rel_date_id pointer into the RelativeDate table. This involves some redundancy of data, and an obligation every time a date is edited to check if it appears as a base date in the RelativeDate table and if it does, to update the dependant date or dates as well.
</p>

</div>

<hr />
<div id='valid'>
  <p>
    <a href="http://validator.w3.org/check?uri=referer"><img
        src="../../valid-xhtml10-blue.png"
        alt="Valid XHTML 1.0 Strict" height="31" width="88" /></a>
  </p>
</div>

<div id='create-date'><p> 7<sup>th</sup> September 2010</p></div>

</div>
<!-- Piwik -->
<script type="text/javascript">
var pkBaseURL = (("https:" == document.location.protocol) ? "https://sourceforge.net/apps/piwik/thefamilypack/" : "http://sourceforge.net/apps/piwik/thefamilypack/");
document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
</script><script type="text/javascript">
try {
var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 1);
piwikTracker.trackPageView();
piwikTracker.enableLinkTracking();
} catch( err ) {}
</script><noscript><p><img src="http://sourceforge.net/apps/piwik/thefamilypack/piwik.php?idsite=1" style="border:0" alt=""/></p></noscript>
<!-- End Piwik Tag -->
</body>
</html>
